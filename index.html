<script>
  document.addEventListener("DOMContentLoaded", function () {
    // üì£ Kohorten-Popup beim Laden + alle 5 Minuten
    function showPopup() {
      document.getElementById("popup-kohorte").style.display = "block";
    }

    function closePopup() {
      document.getElementById("popup-kohorte").style.display = "none";
    }

    showPopup();
    setInterval(showPopup, 300000);

    // üìû Hotline-Button
    const hotlineButton = document.getElementById("hotline-button");
    if (hotlineButton) {
      hotlineButton.addEventListener("click", function () {
        const sound = document.getElementById("busy-sound");
        if (sound) sound.play();

        const messageBox = document.getElementById("group-message");
        if (messageBox) {
          messageBox.textContent = "üì° Zur Zeit sind alle Leitungen belegt, bitte versuchen Sie es sp√§ter noch mal.";
        }
      });
    }

    // ü¶† Infektionsanzeichen-Button
    const infoButton = document.getElementById("info-button");
    const symptomPopup = document.getElementById("popup");
    const closePopupButton = document.getElementById("close-popup");

    if (infoButton && symptomPopup) {
      infoButton.addEventListener("click", function () {
        symptomPopup.classList.remove("hidden");
        const alertSound = document.getElementById("alert-sound");
        if (alertSound) alertSound.play();
      });
    }

    if (closePopupButton && symptomPopup) {
      closePopupButton.addEventListener("click", function () {
        symptomPopup.classList.add("hidden");
      });
    }

    // ‚è±Ô∏è Countdown ab 16:00 Uhr, alle 10 Minuten synchronisiert
    function updateCountdown() {
      const timerElement = document.getElementById("timer");
      const now = new Date();
      const start = new Date();
      start.setHours(16, 0, 0, 0);

      if (now < start) {
        timerElement.textContent = "‚è≥ Noch nicht gestartet";
        return;
      }

      const elapsed = Math.floor((now - start) / 1000);
      const remainder = 600 - (elapsed % 600);
      const minutes = Math.floor(remainder / 60);
      const seconds = remainder % 60;

      timerElement.textContent = `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
    }

    setInterval(updateCountdown, 1000);
  });
</script>
